import json
import os
import networkx as nx
import matplotlib.pyplot as plt

# Path to a graph file
GRAPH_PATH = os.path.join(os.path.dirname(__file__), "rgg_locked", "rgg_N20_2"".json")

# Load topology
with open(GRAPH_PATH, "r") as f:
    topo = json.load(f)

# Build the graph
G = nx.Graph()
G.add_nodes_from(topo["nodes"])
G.add_edges_from([tuple(edge) for edge in topo["edges"]])

# Fix: Convert position keys from str â†’ int
positions = {int(node): tuple(pos) for node, pos in topo["positions"].items()}

# Draw
plt.figure(figsize=(8, 6))
nx.draw(G, pos=positions, with_labels=True, node_size=300, node_color='skyblue', edge_color='gray')
plt.title(f"Topology: {topo['graph_id']}")
plt.show()
